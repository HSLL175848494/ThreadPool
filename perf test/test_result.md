# 测试报告v1.0.2

---

## 1. 任务类型

测试覆盖三种计算密度的任务模型：  

```cpp
unsigned int k; // 使用全局变量，防止计算被优化

void A() {  
   for (int i = 0; i < 10000; i++)  
      k = k * 2 + i; //高计算密度
}  

void B() {  
   for (int i = 0; i < 100; i++)  
      k = k * 2 + i; //中等计算密度
}  

void C() { }  //空任务（极限场景）
```

## 2. 测试配置  

### 线程池参数  
- **线程池**：HSLL::ThreadPool
  - 队列容量：8,192  
  - 任务容器：`TaskStack<24,8>`  
  - 队列分组：启用  
- **批处理模式**：  
  - **32批处理**：工作线程每次尝试批量获取32个任务执行  
  - **32批提交+32批处理**：生产者批量提交32任务 + 工作线程批量处理32任务  

### 测试参数  
| 参数项         | 配置值                     |  
|----------------|----------------------------|  
| 任务总量       | 10,000,000 (1000万任务)    |  
| 结果统计       | 10次测试平均值             |  
| 吞吐量单位     | 百万任务/秒 (M/s)          |  

---

## 3. 性能测试结果  
### 3.1 单生产者模式（1个生产者线程）  
| 线程池配置               | 工作线程数 | 任务A (M/s) | 任务B (M/s) | 任务C (M/s) |
|--------------------------|------------|-------------|-------------|-------------|
| **HSLL::ThreadPool**     | 1          | 0.40        | 6.42        | 13.68       |
|                          | 4          | 1.41        | 6.60        | 7.23        |
|                          | 8          | 2.50        | 6.08        | 7.61        |
| **32批处理**             | 1          | 0.42        | 16.82       | 20.26       | 
|                          | 4          | 1.52        | 9.28        | 10.89       |
|                          | 8          | 2.65        | 9.81        | 11.09       |
| **32批提交+32批处理**    | 1          | 0.41        | 24.95       | 61.07       |
|                          | 4          | 1.51        | 45.43       | 64.88       |
|                          | 8          | 2.69        | 44.98       | 66.20       |
---

### 3.2 多生产者模式（生产者线程数=工作线程数）  
| 线程池配置               | 总线程数 | 任务A (M/s) | 任务B (M/s) | 任务C (M/s) |
|--------------------------|----------|-------------|-------------|-------------|
| **HSLL::ThreadPool**     | 2        | 0.81        | 11.50       | 17.23       |
|                          | 4        | 1.45        | 11.44       | 19.39       |
|                          | 8        | 2.44        | 12.24       | 21.19       |
| **32批处理**             | 2        | 0.86        | 22.18       | 20.44       | 
|                          | 4        | 1.55        | 33.15       | 35.38       |
|                          | 8        | 2.55        | 39.15       | 45.39       |
| **32批提交+32批处理**    | 2        | 0.85        | 45.13       | 110.14      |
|                          | 4        | 1.59        | 78.78       | 193.42      |
|                          | 8        | 2.54        | 112.92      | 237.42      |

---

## 4. 测试环境  
| 组件       | 规格说明                     |  
|------------|------------------------------|  
| 编译器     | MSVC v143 x64                |  
| 优化选项   | /O2 (最大速度优化)           |  
| CPU        | Intel i7-11800H (8核/16线程) |  
| 基础频率   | 2.3 GHz                      |  
| 操作系统   | Windows 10/11 x64 19045.5737 |  