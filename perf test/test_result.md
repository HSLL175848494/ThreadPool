# 线程池性能测试报告

## 1. 测试任务类型
测试包含三种不同计算密度的任务：

```cpp
unsigned int k;//使用全局变量防止循环被优化

// 高计算密度任务
void A() {
   for (int i = 0; i < 10000; i++)
      k = k * 2 + i; // 约10,000次运算
}

// 中等计算密度任务
void B() {
   for (int i = 0; i < 100; i++)
      k2 = k2 * 2 + i; // 约100次运算
}

// 空任务（极端轻量级）
void C() {

}
```

## 2. 测试结果（吞吐量：百万任务/秒）

**sp_tp**：  [GitHub开源的简单线程池实现](https://github.com/progschj/ThreadPool.git)

**boost_tp**：  boost::asio::thread_pool

**hsll_tp**：   HSLL::ThreadPool 队列长度:10000 容器:TaskStack<24,8>


| 线程池类型               | 线程数 | 任务A (M/s) | 任务B (M/s) | 任务C (M/s) |
|--------------------------|--------|-------------|-------------|-------------|
| **sp_tp**                | 1      | 0.36        | 2.36        | 1.75        |
|                          | 4      | 1.10        | 0.95        | 0.93        |
|                          | 8      | 0.65        | 0.62        | 0.61        |
| **boost_tp**             | 1      | 0.40        | 2.87        | 2.70        |
|                          | 4      | 1.31        | 0.94        | 0.90        |
|                          | 8      | 0.80        | 0.65        | 0.64        |
| **hsll_tp**              | 1      | 0.42        | 5.41        | 13.81       |
|                          | 4      | 1.45        | 3.40        | 3.55        |
|                          | 8      | 2.56        | 1.85        | 2.48        |
| **hsll_tp(32批处理)**     | 1      | 0.42        | 17.01       | 22.50       |
|                          | 4      | 1.60        | 5.26        | 6.24        |
|                          | 8      | 2.72        | 2.94        | 3.82       |
| **hsll_tp(32批提交+32批处理)** | 1      | 0.41        |24.22       | 62.49   |
|                          | 4      | 1.53        | 50.09       | 60.17      |
|                          | 8      | 2.65        | 36.89        | 42.92      |


## 3. 测试环境
| 组件         | 配置详情                     |
|--------------|------------------------------|
| 编译器       | MSVC v143 x64                |
| 优化选项     | /O2 最大优化                 |
| 处理器       | Intel i7-11800H (8C/16T)     |
| 基础频率     | 2.3 GHz                      |
| 操作系统     | Windows 10/11 x64 19045.5737 |