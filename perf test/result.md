# 测试报告v1.1.3

## 1. 任务类型

测试覆盖三种计算密度的任务模型：  

```cpp
unsigned int k; // 使用全局变量，防止计算被优化

void A() {  
   for (int i = 0; i < 10000; i++)  
      k = k * 2 + i; //高计算密度
}  

void B() {  
   for (int i = 0; i < 100; i++)  
      k = k * 2 + i; //中等计算密度
}  

void C() { }  //空任务（极限场景）
```

## 2. 测试配置  

### 线程池参数  
  - 队列容量：8,192  
  - 任务容器：`TaskStack<24,8>`  
  - 队列分组：启用  

### 测试参数  
| 参数项         | 配置值                     |  
|----------------|----------------------------|  
| 任务总量       | 10,000,000 (1000万任务)    |  
| 结果统计       | 10次测试平均值             |  
| 吞吐量单位     | 百万任务/秒 (M/s)          |  

---

## 3. 性能测试结果

- 单生产者模式：1个生产者线程
- 多生产者模式：生产者线程数=工作线程数

### 单生产者模式

**任务存储在栈上**：

| 工作线程数 | 任务A (M/s) | 任务B (M/s) | 任务C (M/s) |
|------------|-------------|-------------|-------------|
| 1          | 0.40        | 6.42        | 13.68       |
| 4          | 1.41        | 6.60        | 7.23        |
| 8          | 2.50        | 6.08        | 7.61        |

**任务存储在堆上**：

| 工作线程数 | 任务A (M/s) | 任务B (M/s) | 任务C (M/s) |
|------------|-------------|-------------|-------------|
| 1          | 0.40        | 4.43        | 4.20       |
| 4          | 1.49        | 2.88        | 2.94        |
| 8          | 2.62        | 2.80        | 2.84        |


### 多生产者模式

**任务存储在栈上**：

| 工作线程数 | 任务A (M/s) | 任务B (M/s) | 任务C (M/s) |
|----------|-------------|-------------|-------------|
| 2        | 0.81        | 11.50       | 17.23       |
| 4        | 1.45        | 11.44       | 19.39       |
| 8        | 2.44        | 12.24       | 21.19       |

**任务存储在堆上**：

| 工作线程数 | 任务A (M/s) | 任务B (M/s) | 任务C (M/s) |
|----------|-------------|-------------|-------------|
| 2        | 0.77        | 5.35       | 5.91       |
| 4        | 1.39        | 7.40       | 8.92       |
| 8        | 2.29        | 9.91       | 11.34       |
---


## 4. 测试环境  
| 组件       | 规格说明                     |  
|------------|------------------------------|  
| 编译器     | MSVC v143 x64                |  
| 优化选项   | /O2 (最大速度优化)           |  
| CPU        | Intel i7-11800H (8核/16线程) |  
| 基础频率   | 2.3 GHz                      |  
| 操作系统   | Windows 10/11 x64 19045.5737 |  
